{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\rshaikh\\\\Desktop\\\\development\\\\dev-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\rshaikh\\\\Desktop\\\\development\\\\dev-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import{setAlert}from'./alert';import axios from'axios';import{REGISTER_SUCCESS,REGISTER_FAIL,USER_LOADED,AUTH_FAIL,LOGIN_SUCCESS,LOGIN_FAIL,LOGOUT}from'./types';import setAuthToken from'../utils/authToken';export var loadUser=function loadUser(){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:debugger;if(!localStorage.token){_context.next=4;break;}_context.next=4;return setAuthToken(localStorage.token);case 4:_context.prev=4;_context.next=7;return axios.get('http://127.0.0.1:5000/api/users/currentUser/');case 7:res=_context.sent;debugger;dispatch({type:USER_LOADED,payload:res.data});_context.next=16;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](4);debugger;dispatch({type:AUTH_FAIL});case 16:case\"end\":return _context.stop();}}},_callee,null,[[4,12]]);}));return function(_x){return _ref.apply(this,arguments);};}();};export var register=function register(_ref2){var name=_ref2.name,email=_ref2.email,password=_ref2.password,password2=_ref2.password2;return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var config,body,res,errors;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:config={headers:{\"content-type\":\"application/json\"}};body=JSON.stringify({name:name,email:email,password:password,confirmPassword:password2});_context2.prev=2;debugger;_context2.next=6;return axios.post('http://127.0.0.1:5000/api/users/register/',body,config);case 6:res=_context2.sent;dispatch({type:REGISTER_SUCCESS,payload:res.data});dispatch(setAlert(\"User Registered Successfully\",\"success\"));_context2.next=17;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](2);debugger;errors=_context2.t0.response.data.errors;if(errors){errors.forEach(function(error){dispatch(setAlert(error,\"danger\"));});}dispatch({type:REGISTER_FAIL});case 17:case\"end\":return _context2.stop();}}},_callee2,null,[[2,11]]);}));return function(_x2){return _ref3.apply(this,arguments);};}();};export var login=function login(email,password){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var config,body,res,errors;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:config={headers:{\"content-type\":\"application/json\"}};body=JSON.stringify({email:email,password:password});_context3.prev=2;debugger;_context3.next=6;return axios.post('http://127.0.0.1:5000/api/users/login/',body,config);case 6:res=_context3.sent;dispatch({type:LOGIN_SUCCESS,payload:res});dispatch(loadUser());_context3.next=17;break;case 11:_context3.prev=11;_context3.t0=_context3[\"catch\"](2);debugger;errors=_context3.t0.response.data.errors?_context3.t0.response.data.errors:_context3.t0.response.data;if(errors){errors.forEach(function(error){dispatch(setAlert(error,\"danger\"));});}dispatch({type:LOGIN_FAIL});case 17:case\"end\":return _context3.stop();}}},_callee3,null,[[2,11]]);}));return function(_x3){return _ref4.apply(this,arguments);};}();};export var logout=function logout(){return/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:dispatch({type:LOGOUT});dispatch(setAlert(\"User Logout Successfully\",\"success\"));case 2:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x4){return _ref5.apply(this,arguments);};}();};","map":{"version":3,"sources":["C:/Users/rshaikh/Desktop/development/dev-front/src/actions/auth.js"],"names":["setAlert","axios","REGISTER_SUCCESS","REGISTER_FAIL","USER_LOADED","AUTH_FAIL","LOGIN_SUCCESS","LOGIN_FAIL","LOGOUT","setAuthToken","loadUser","dispatch","localStorage","token","get","res","type","payload","data","register","name","email","password","password2","config","headers","body","JSON","stringify","confirmPassword","post","errors","response","forEach","error","login","logout"],"mappings":"2VAAA,OAAQA,QAAR,KAAuB,SAAvB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAAQC,gBAAR,CAA0BC,aAA1B,CAAyCC,WAAzC,CAAsDC,SAAtD,CAAiEC,aAAjE,CAAgFC,UAAhF,CAA4FC,MAA5F,KAAyG,SAAzG,CACA,MAAOC,CAAAA,YAAP,KAAyB,oBAAzB,CAEA,MAAO,IAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,kGAAK,iBAAMC,QAAN,0HACzB,SADyB,IAEtBC,YAAY,CAACC,KAFS,+CAGfJ,CAAAA,YAAY,CAACG,YAAY,CAACC,KAAd,CAHG,8CAOHZ,CAAAA,KAAK,CAACa,GAAN,CAAU,8CAAV,CAPG,QAOfC,GAPe,eAQrB,SACAJ,QAAQ,CAAC,CACLK,IAAI,CAAEZ,WADD,CAELa,OAAO,CAAEF,GAAG,CAACG,IAFR,CAAD,CAAR,CATqB,iFAerB,SACAP,QAAQ,CAAC,CACLK,IAAI,CAAEX,SADD,CAAD,CAAR,CAhBqB,qEAAL,gEAAjB,CAwBP,MAAO,IAAMc,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,WAAEC,CAAAA,IAAF,OAAEA,IAAF,CAAQC,KAAR,OAAQA,KAAR,CAAeC,QAAf,OAAeA,QAAf,CAAyBC,SAAzB,OAAyBA,SAAzB,iGAAuC,kBAAMZ,QAAN,iJAErDa,MAFqD,CAE5C,CACXC,OAAO,CAAG,CACN,eAAgB,kBADV,CADC,CAF4C,CAQrDC,IARqD,CAQ9CC,IAAI,CAACC,SAAL,CAAe,CAACR,IAAI,CAAJA,IAAD,CAAOC,KAAK,CAALA,KAAP,CAAcC,QAAQ,CAARA,QAAd,CAAwBO,eAAe,CAACN,SAAxC,CAAf,CAR8C,kBAWvD,SAXuD,uBAYrCtB,CAAAA,KAAK,CAAC6B,IAAN,CAAW,2CAAX,CAAwDJ,IAAxD,CAA8DF,MAA9D,CAZqC,QAYjDT,GAZiD,gBAavDJ,QAAQ,CAAC,CACLK,IAAI,CAAEd,gBADD,CAELe,OAAO,CAAEF,GAAG,CAACG,IAFR,CAAD,CAAR,CAIAP,QAAQ,CAACX,QAAQ,CAAC,8BAAD,CAAgC,SAAhC,CAAT,CAAR,CAjBuD,qFAqBvD,SACM+B,MAtBiD,CAsBxC,aAAIC,QAAJ,CAAad,IAAb,CAAkBa,MAtBsB,CAuBvD,GAAGA,MAAH,CAAU,CACNA,MAAM,CAACE,OAAP,CAAe,SAAAC,KAAK,CAAI,CACpBvB,QAAQ,CAACX,QAAQ,CAACkC,KAAD,CAAO,QAAP,CAAT,CAAR,CACH,CAFD,EAGH,CAEDvB,QAAQ,CAAC,CACLK,IAAI,CAACb,aADA,CAAD,CAAR,CA7BuD,uEAAvC,kEAAjB,CAuCP,MAAO,IAAMgC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,CAACd,KAAD,CAAQC,QAAR,kGAAoB,kBAAMX,QAAN,iJAE/Ba,MAF+B,CAEtB,CACXC,OAAO,CAAG,CACN,eAAgB,kBADV,CADC,CAFsB,CAQ/BC,IAR+B,CAQxBC,IAAI,CAACC,SAAL,CAAe,CAACP,KAAK,CAALA,KAAD,CAAQC,QAAQ,CAARA,QAAR,CAAf,CARwB,kBAWjC,SAXiC,uBAYfrB,CAAAA,KAAK,CAAC6B,IAAN,CAAW,wCAAX,CAAqDJ,IAArD,CAA2DF,MAA3D,CAZe,QAY3BT,GAZ2B,gBAajCJ,QAAQ,CAAC,CACLK,IAAI,CAAEV,aADD,CAELW,OAAO,CAAEF,GAFJ,CAAD,CAAR,CAIAJ,QAAQ,CAACD,QAAQ,EAAT,CAAR,CAjBiC,qFAoBjC,SACMqB,MArB2B,CAqBlB,aAAIC,QAAJ,CAAad,IAAb,CAAkBa,MAAlB,CAA2B,aAAIC,QAAJ,CAAad,IAAb,CAAkBa,MAA7C,CAAsD,aAAIC,QAAJ,CAAad,IArBjD,CAsBjC,GAAGa,MAAH,CAAU,CACNA,MAAM,CAACE,OAAP,CAAe,SAAAC,KAAK,CAAI,CACpBvB,QAAQ,CAACX,QAAQ,CAACkC,KAAD,CAAO,QAAP,CAAT,CAAR,CACH,CAFD,EAGH,CAEDvB,QAAQ,CAAC,CACLK,IAAI,CAACT,UADA,CAAD,CAAR,CA5BiC,uEAApB,kEAAd,CAmCP,MAAO,IAAM6B,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,mGAAM,kBAAMzB,QAAN,sHAExBA,QAAQ,CAAC,CACDK,IAAI,CAAER,MADL,CAAD,CAAR,CAGAG,QAAQ,CAACX,QAAQ,CAAC,0BAAD,CAA4B,SAA5B,CAAT,CAAR,CALwB,wDAAN,kEAAf","sourcesContent":["import {setAlert} from './alert';\r\nimport axios from 'axios';\r\nimport{ REGISTER_SUCCESS, REGISTER_FAIL, USER_LOADED, AUTH_FAIL, LOGIN_SUCCESS, LOGIN_FAIL, LOGOUT} from './types';\r\nimport setAuthToken from '../utils/authToken';\r\n\r\nexport const loadUser = ()=> async dispatch=>{\r\n    debugger;\r\n    if(localStorage.token){\r\n        await setAuthToken(localStorage.token);\r\n    }\r\n    \r\n    try{\r\n        const res = await axios.get('http://127.0.0.1:5000/api/users/currentUser/')\r\n        debugger;\r\n        dispatch({\r\n            type: USER_LOADED,\r\n            payload: res.data\r\n        })\r\n    }\r\n    catch(err){\r\n        debugger;\r\n        dispatch({\r\n            type: AUTH_FAIL\r\n        })\r\n    }\r\n}\r\n\r\n\r\n\r\nexport const register = ({name, email, password, password2})=> async dispatch =>{\r\n\r\n    const config = {\r\n        headers : {\r\n            \"content-type\": \"application/json\",\r\n        }\r\n    }\r\n\r\n    const body = JSON.stringify({name, email, password, confirmPassword:password2});\r\n    \r\n    try{\r\n        debugger;\r\n        const res = await axios.post('http://127.0.0.1:5000/api/users/register/', body, config);\r\n        dispatch({\r\n            type: REGISTER_SUCCESS,\r\n            payload: res.data\r\n        })\r\n        dispatch(setAlert(\"User Registered Successfully\",\"success\"))\r\n\r\n    }\r\n    catch(err){\r\n        debugger;\r\n        const errors = err.response.data.errors\r\n        if(errors){\r\n            errors.forEach(error => {\r\n                dispatch(setAlert(error,\"danger\"))\r\n            });\r\n        }\r\n\r\n        dispatch({\r\n            type:REGISTER_FAIL\r\n        })   \r\n    }\r\n\r\n}\r\n\r\n\r\n\r\n\r\nexport const login = (email, password)=> async dispatch =>{\r\n\r\n    const config = {\r\n        headers : {\r\n            \"content-type\": \"application/json\",\r\n        }\r\n    }\r\n\r\n    const body = JSON.stringify({email, password});\r\n    \r\n    try{\r\n        debugger;\r\n        const res = await axios.post('http://127.0.0.1:5000/api/users/login/', body, config);\r\n        dispatch({\r\n            type: LOGIN_SUCCESS,\r\n            payload: res\r\n        })\r\n        dispatch(loadUser());\r\n    }\r\n    catch(err){\r\n        debugger;\r\n        const errors = err.response.data.errors ? err.response.data.errors : err.response.data \r\n        if(errors){\r\n            errors.forEach(error => {\r\n                dispatch(setAlert(error,\"danger\"))\r\n            });\r\n        }\r\n\r\n        dispatch({\r\n            type:LOGIN_FAIL\r\n        })   \r\n    }\r\n\r\n}\r\n\r\nexport const logout = () => async dispatch =>{\r\n\r\n    dispatch({\r\n            type: LOGOUT\r\n    })\r\n    dispatch(setAlert(\"User Logout Successfully\",\"success\"))\r\n\r\n}"]},"metadata":{},"sourceType":"module"}