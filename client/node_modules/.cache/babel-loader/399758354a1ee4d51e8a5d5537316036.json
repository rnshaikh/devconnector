{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\rshaikh\\\\Desktop\\\\development\\\\dev-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\rshaikh\\\\Desktop\\\\development\\\\dev-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import{setAlert}from'./alert';import axios from'axios';import{GET_POST,POST_ERROR,GET_ALL_POST}from'./types';export var createPost=function createPost(fromData,history){var edit=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var config,res,_res,errors;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;console.log(\"Profile Form Data\",fromData);debugger;config={headers:{\"content-type\":\"application/json\"}};_context.next=6;return axios.post('http://127.0.0.1:5000/api/posts/',fromData,config);case 6:res=_context.sent;if(!(res.status===200)){_context.next=15;break;}_context.next=10;return axios.get(\"http://127.0.0.1:5000/api/posts/\");case 10:_res=_context.sent;dispatch({type:GET_ALL_POST,payload:_res.data});dispatch(setAlert(\"Post Added\",\"success\"));_context.next=16;break;case 15:dispatch({type:POST_ERROR,payload:{status:res.status,msg:res.msg}});case 16:_context.next=24;break;case 18:_context.prev=18;_context.t0=_context[\"catch\"](0);errors=_context.t0.response.data.errors;console.log(_context.t0);if(errors){errors.forEach(function(error){dispatch(setAlert(error,\"danger\"));});}dispatch({type:POST_ERROR,payload:{status:_context.t0.response.status,msg:_context.t0.response.statusText}});case 24:case\"end\":return _context.stop();}}},_callee,null,[[0,18]]);}));return function(_x){return _ref.apply(this,arguments);};}();};export var getPost=function getPost(){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.get(\"http://127.0.0.1:5000/api/posts/\");case 3:res=_context2.sent;dispatch({type:GET_ALL_POST,payload:res.data});_context2.next=11;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);debugger;dispatch({type:POST_ERROR,payload:{status:_context2.t0.response.status,msg:_context2.t0.response.statusText}});case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[0,7]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export var getPostById=function getPostById(id){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.get(\"http://127.0.0.1:5000/api/posts/\".concat(id));case 3:res=_context3.sent;dispatch({type:GET_POST,payload:res.data});_context3.next=11;break;case 7:_context3.prev=7;_context3.t0=_context3[\"catch\"](0);debugger;dispatch({type:POST_ERROR,payload:{status:_context3.t0.response.status,msg:_context3.t0.response.statusText}});case 11:case\"end\":return _context3.stop();}}},_callee3,null,[[0,7]]);}));return function(_x3){return _ref3.apply(this,arguments);};}();};export var deletePost=function deletePost(id){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch){var res,_res2;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return axios.delete(\"http://127.0.0.1:5000/api/posts/\".concat(id));case 3:res=_context4.sent;if(!(res.status===200)){_context4.next=12;break;}_context4.next=7;return axios.get(\"http://127.0.0.1:5000/api/posts/\");case 7:_res2=_context4.sent;dispatch({type:GET_ALL_POST,payload:_res2.data});dispatch(setAlert(\"Post deleted\",\"success\"));_context4.next=13;break;case 12:dispatch({type:POST_ERROR,payload:{status:res.status,msg:res.msg}});case 13:_context4.next=19;break;case 15:_context4.prev=15;_context4.t0=_context4[\"catch\"](0);debugger;dispatch({type:POST_ERROR,payload:{status:_context4.t0.response.status,msg:_context4.t0.response.statusText}});case 19:case\"end\":return _context4.stop();}}},_callee4,null,[[0,15]]);}));return function(_x4){return _ref4.apply(this,arguments);};}();};export var likePost=function likePost(id){return/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(dispatch){var config,body,res,_res3;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.prev=0;config={headers:{\"content-type\":\"application/json\"}};body={\"msg\":\"text\"};_context5.next=5;return axios.put(\"http://127.0.0.1:5000/api/posts/like/\".concat(id),body,config);case 5:res=_context5.sent;if(!(res.status===200)){_context5.next=14;break;}_context5.next=9;return axios.get(\"http://127.0.0.1:5000/api/posts/\");case 9:_res3=_context5.sent;dispatch({type:GET_ALL_POST,payload:_res3.data});dispatch(setAlert(\"Post liked\",\"success\"));_context5.next=15;break;case 14:dispatch({type:POST_ERROR,payload:{status:res.status,msg:res.msg}});case 15:_context5.next=22;break;case 17:_context5.prev=17;_context5.t0=_context5[\"catch\"](0);debugger;dispatch({type:POST_ERROR,payload:{status:_context5.t0.response.status,msg:_context5.t0.response.data.msg}});dispatch(setAlert(_context5.t0.response.data.msg,\"danger\"));case 22:case\"end\":return _context5.stop();}}},_callee5,null,[[0,17]]);}));return function(_x5){return _ref5.apply(this,arguments);};}();};export var unlikePost=function unlikePost(id){return/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(dispatch){var config,body,res,_res4;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.prev=0;config={headers:{\"content-type\":\"application/json\"}};body={\"text\":\"msg\"};_context6.next=5;return axios.put(\"http://127.0.0.1:5000/api/posts/unlike/\".concat(id),body,config);case 5:res=_context6.sent;if(!(res.status===200)){_context6.next=14;break;}_context6.next=9;return axios.get(\"http://127.0.0.1:5000/api/posts/\");case 9:_res4=_context6.sent;dispatch({type:GET_ALL_POST,payload:_res4.data});dispatch(setAlert(\"Post unliked\",\"success\"));_context6.next=15;break;case 14:dispatch({type:POST_ERROR,payload:{status:res.status,msg:res.msg}});case 15:_context6.next=22;break;case 17:_context6.prev=17;_context6.t0=_context6[\"catch\"](0);debugger;dispatch({type:POST_ERROR,payload:{status:_context6.t0.response.status,msg:_context6.t0.response.data.msg}});dispatch(setAlert(_context6.t0.response.data.msg,\"danger\"));case 22:case\"end\":return _context6.stop();}}},_callee6,null,[[0,17]]);}));return function(_x6){return _ref6.apply(this,arguments);};}();};export var createComment=function createComment(fromData,id){return/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(dispatch){var config,res,_res5,errors;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:debugger;_context7.prev=1;console.log(\"comment Form Data\",fromData);debugger;config={headers:{\"content-type\":\"application/json\"}};_context7.next=7;return axios.post(\"http://127.0.0.1:5000/api/posts/comment/\".concat(id),fromData,config);case 7:res=_context7.sent;if(!(res.status===200)){_context7.next=16;break;}_context7.next=11;return axios.get(\"http://127.0.0.1:5000/api/posts/\".concat(id));case 11:_res5=_context7.sent;dispatch({type:GET_POST,payload:_res5.data});dispatch(setAlert(\"Comment Added\",\"success\"));_context7.next=17;break;case 16:dispatch({type:POST_ERROR,payload:{status:res.status,msg:res.msg}});case 17:_context7.next=25;break;case 19:_context7.prev=19;_context7.t0=_context7[\"catch\"](1);errors=_context7.t0.response.data.errors;console.log(_context7.t0);if(errors){errors.forEach(function(error){dispatch(setAlert(error,\"danger\"));});}dispatch({type:POST_ERROR,payload:{status:_context7.t0.response.status,msg:_context7.t0.response.statusText}});case 25:case\"end\":return _context7.stop();}}},_callee7,null,[[1,19]]);}));return function(_x7){return _ref7.apply(this,arguments);};}();};export var removeComment=function removeComment(id,comment_id){return/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(dispatch){var res,_res6;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.prev=0;_context8.next=3;return axios.delete(\"http://127.0.0.1:5000/api/posts/comment/\".concat(id,\"/\").concat(comment_id));case 3:res=_context8.sent;if(!(res.status===200)){_context8.next=12;break;}_context8.next=7;return axios.get(\"http://127.0.0.1:5000/api/posts/\".concat(id));case 7:_res6=_context8.sent;dispatch({type:GET_POST,payload:_res6.data});dispatch(setAlert(\"Comment removed\",\"success\"));_context8.next=13;break;case 12:dispatch({type:POST_ERROR,payload:{status:res.status,msg:res.msg}});case 13:_context8.next=19;break;case 15:_context8.prev=15;_context8.t0=_context8[\"catch\"](0);debugger;dispatch({type:POST_ERROR,payload:{status:_context8.t0.response.status,msg:_context8.t0.response.statusText}});case 19:case\"end\":return _context8.stop();}}},_callee8,null,[[0,15]]);}));return function(_x8){return _ref8.apply(this,arguments);};}();};","map":{"version":3,"sources":["C:/Users/rshaikh/Desktop/development/dev-front/src/actions/post.js"],"names":["setAlert","axios","GET_POST","POST_ERROR","GET_ALL_POST","createPost","fromData","history","edit","dispatch","console","log","config","headers","post","res","status","get","type","payload","data","msg","errors","response","forEach","error","statusText","getPost","getPostById","id","deletePost","delete","likePost","body","put","unlikePost","createComment","removeComment","comment_id"],"mappings":"2VAAA,OAAQA,QAAR,KAAuB,SAAvB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAAQC,QAAR,CAAkBC,UAAlB,CAA6BC,YAA7B,KAAiD,SAAjD,CAEA,MAAO,IAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACC,QAAD,CAAWC,OAAX,KAAoBC,CAAAA,IAApB,2DAAyB,KAAzB,gGAAmC,iBAAMC,QAAN,6JAErDC,OAAO,CAACC,GAAR,CAAY,mBAAZ,CAAiCL,QAAjC,EACA,SAEMM,MAL+C,CAKtC,CACXC,OAAO,CAAG,CACN,eAAgB,kBADV,CADC,CALsC,uBAWnCZ,CAAAA,KAAK,CAACa,IAAN,CAAW,kCAAX,CAA+CR,QAA/C,CAAyDM,MAAzD,CAXmC,QAW/CG,GAX+C,oBAajDA,GAAG,CAACC,MAAJ,GAAe,GAbkC,kDAc/Bf,CAAAA,KAAK,CAACgB,GAAN,oCAd+B,SAc3CF,IAd2C,eAgBjDN,QAAQ,CAAC,CACLS,IAAI,CAAEd,YADD,CAELe,OAAO,CAAEJ,IAAG,CAACK,IAFR,CAAD,CAAR,CAKAX,QAAQ,CAACT,QAAQ,CAAC,YAAD,CAAe,SAAf,CAAT,CAAR,CArBiD,+BAwBjDS,QAAQ,CAAC,CACLS,IAAI,CAAEf,UADD,CAELgB,OAAO,CAAE,CAACH,MAAM,CAACD,GAAG,CAACC,MAAZ,CAAoBK,GAAG,CAACN,GAAG,CAACM,GAA5B,CAFJ,CAAD,CAAR,CAxBiD,yFAgC/CC,MAhC+C,CAgCtC,YAAIC,QAAJ,CAAaH,IAAb,CAAkBE,MAhCoB,CAiCrDZ,OAAO,CAACC,GAAR,cACA,GAAGW,MAAH,CAAU,CACNA,MAAM,CAACE,OAAP,CAAe,SAAAC,KAAK,CAAI,CACpBhB,QAAQ,CAACT,QAAQ,CAACyB,KAAD,CAAO,QAAP,CAAT,CAAR,CACH,CAFD,EAGH,CAEDhB,QAAQ,CAAC,CACLS,IAAI,CAAEf,UADD,CAELgB,OAAO,CAAE,CAACH,MAAM,CAAC,YAAIO,QAAJ,CAAaP,MAArB,CAA6BK,GAAG,CAAC,YAAIE,QAAJ,CAAaG,UAA9C,CAFJ,CAAD,CAAR,CAxCqD,qEAAnC,gEAAnB,CAiDP,MAAO,IAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,mGAAK,kBAAMlB,QAAN,sKAIFR,CAAAA,KAAK,CAACgB,GAAN,oCAJE,QAIdF,GAJc,gBAMpBN,QAAQ,CAAC,CACLS,IAAI,CAAEd,YADD,CAELe,OAAO,CAAEJ,GAAG,CAACK,IAFR,CAAD,CAAR,CANoB,mFAapB,SACAX,QAAQ,CAAC,CACLS,IAAI,CAAEf,UADD,CAELgB,OAAO,CAAE,CAACH,MAAM,CAAC,aAAIO,QAAJ,CAAaP,MAArB,CAA6BK,GAAG,CAAC,aAAIE,QAAJ,CAAaG,UAA9C,CAFJ,CAAD,CAAR,CAdoB,sEAAL,kEAAhB,CAuBP,MAAO,IAAME,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,EAAD,kGAAO,kBAAMpB,QAAN,sKAIRR,CAAAA,KAAK,CAACgB,GAAN,2CAA6CY,EAA7C,EAJQ,QAIpBd,GAJoB,gBAM1BN,QAAQ,CAAC,CACLS,IAAI,CAAEhB,QADD,CAELiB,OAAO,CAAEJ,GAAG,CAACK,IAFR,CAAD,CAAR,CAN0B,mFAa1B,SACAX,QAAQ,CAAC,CACLS,IAAI,CAAEf,UADD,CAELgB,OAAO,CAAE,CAACH,MAAM,CAAC,aAAIO,QAAJ,CAAaP,MAArB,CAA6BK,GAAG,CAAC,aAAIE,QAAJ,CAAaG,UAA9C,CAFJ,CAAD,CAAR,CAd0B,sEAAP,kEAApB,CAsBP,MAAO,IAAMI,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACD,EAAD,kGAAO,kBAAMpB,QAAN,4KAIPR,CAAAA,KAAK,CAAC8B,MAAN,2CAAgDF,EAAhD,EAJO,QAInBd,GAJmB,qBAMrBA,GAAG,CAACC,MAAJ,GAAe,GANM,mDAOHf,CAAAA,KAAK,CAACgB,GAAN,oCAPG,QAOfF,KAPe,gBASrBN,QAAQ,CAAC,CACLS,IAAI,CAAEd,YADD,CAELe,OAAO,CAAEJ,KAAG,CAACK,IAFR,CAAD,CAAR,CAKAX,QAAQ,CAACT,QAAQ,CAAC,cAAD,CAAiB,SAAjB,CAAT,CAAR,CAdqB,gCAiBrBS,QAAQ,CAAC,CACLS,IAAI,CAAEf,UADD,CAELgB,OAAO,CAAE,CAACH,MAAM,CAACD,GAAG,CAACC,MAAZ,CAAoBK,GAAG,CAACN,GAAG,CAACM,GAA5B,CAFJ,CAAD,CAAR,CAjBqB,6FAyBzB,SACAZ,QAAQ,CAAC,CACLS,IAAI,CAAEf,UADD,CAELgB,OAAO,CAAE,CAACH,MAAM,CAAC,aAAIO,QAAJ,CAAaP,MAArB,CAA6BK,GAAG,CAAC,aAAIE,QAAJ,CAAaG,UAA9C,CAFJ,CAAD,CAAR,CA1ByB,uEAAP,kEAAnB,CAmCP,MAAO,IAAMM,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACH,EAAD,kGAAO,kBAAMpB,QAAN,iKAIjBG,MAJiB,CAIR,CACXC,OAAO,CAAG,CACN,eAAgB,kBADV,CADC,CAJQ,CAUjBoB,IAViB,CAUV,CAAC,MAAO,MAAR,CAVU,wBAYLhC,CAAAA,KAAK,CAACiC,GAAN,gDAAkDL,EAAlD,EAAwDI,IAAxD,CAA8DrB,MAA9D,CAZK,QAYjBG,GAZiB,qBAcnBA,GAAG,CAACC,MAAJ,GAAe,GAdI,mDAeDf,CAAAA,KAAK,CAACgB,GAAN,oCAfC,QAebF,KAfa,gBAiBnBN,QAAQ,CAAC,CACLS,IAAI,CAAEd,YADD,CAELe,OAAO,CAAEJ,KAAG,CAACK,IAFR,CAAD,CAAR,CAKAX,QAAQ,CAACT,QAAQ,CAAC,YAAD,CAAe,SAAf,CAAT,CAAR,CAtBmB,gCAyBnBS,QAAQ,CAAC,CACLS,IAAI,CAAEf,UADD,CAELgB,OAAO,CAAE,CAACH,MAAM,CAACD,GAAG,CAACC,MAAZ,CAAoBK,GAAG,CAACN,GAAG,CAACM,GAA5B,CAFJ,CAAD,CAAR,CAzBmB,6FAiCvB,SACAZ,QAAQ,CAAC,CACLS,IAAI,CAAEf,UADD,CAELgB,OAAO,CAAE,CAACH,MAAM,CAAC,aAAIO,QAAJ,CAAaP,MAArB,CAA6BK,GAAG,CAAC,aAAIE,QAAJ,CAAaH,IAAb,CAAkBC,GAAnD,CAFJ,CAAD,CAAR,CAIAZ,QAAQ,CAACT,QAAQ,CAAC,aAAIuB,QAAJ,CAAaH,IAAb,CAAkBC,GAAnB,CAAwB,QAAxB,CAAT,CAAR,CAtCuB,uEAAP,kEAAjB,CA2CP,MAAO,IAAMc,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACN,EAAD,kGAAO,kBAAMpB,QAAN,iKAInBG,MAJmB,CAIV,CACXC,OAAO,CAAG,CACN,eAAgB,kBADV,CADC,CAJU,CAUnBoB,IAVmB,CAUZ,CAAC,OAAQ,KAAT,CAVY,wBAYPhC,CAAAA,KAAK,CAACiC,GAAN,kDAAoDL,EAApD,EAA0DI,IAA1D,CAAgErB,MAAhE,CAZO,QAYnBG,GAZmB,qBAcrBA,GAAG,CAACC,MAAJ,GAAe,GAdM,mDAeHf,CAAAA,KAAK,CAACgB,GAAN,oCAfG,QAefF,KAfe,gBAiBrBN,QAAQ,CAAC,CACLS,IAAI,CAAEd,YADD,CAELe,OAAO,CAAEJ,KAAG,CAACK,IAFR,CAAD,CAAR,CAKAX,QAAQ,CAACT,QAAQ,CAAC,cAAD,CAAiB,SAAjB,CAAT,CAAR,CAtBqB,gCAyBrBS,QAAQ,CAAC,CACLS,IAAI,CAAEf,UADD,CAELgB,OAAO,CAAE,CAACH,MAAM,CAACD,GAAG,CAACC,MAAZ,CAAoBK,GAAG,CAACN,GAAG,CAACM,GAA5B,CAFJ,CAAD,CAAR,CAzBqB,6FAiCzB,SACAZ,QAAQ,CAAC,CACLS,IAAI,CAAEf,UADD,CAELgB,OAAO,CAAE,CAACH,MAAM,CAAC,aAAIO,QAAJ,CAAaP,MAArB,CAA6BK,GAAG,CAAC,aAAIE,QAAJ,CAAaH,IAAb,CAAkBC,GAAnD,CAFJ,CAAD,CAAR,CAIAZ,QAAQ,CAACT,QAAQ,CAAC,aAAIuB,QAAJ,CAAaH,IAAb,CAAkBC,GAAnB,CAAwB,QAAxB,CAAT,CAAR,CAtCyB,uEAAP,kEAAnB,CA4CP,MAAO,IAAMe,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAAC9B,QAAD,CAAWuB,EAAX,kGAAkB,kBAAMpB,QAAN,kJAC3C,SAD2C,iBAGvCC,OAAO,CAACC,GAAR,CAAY,mBAAZ,CAAiCL,QAAjC,EACA,SAEMM,MANiC,CAMxB,CACXC,OAAO,CAAG,CACN,eAAgB,kBADV,CADC,CANwB,wBAYrBZ,CAAAA,KAAK,CAACa,IAAN,mDAAsDe,EAAtD,EAA4DvB,QAA5D,CAAsEM,MAAtE,CAZqB,QAYjCG,GAZiC,qBAcnCA,GAAG,CAACC,MAAJ,GAAe,GAdoB,oDAejBf,CAAAA,KAAK,CAACgB,GAAN,2CAA6CY,EAA7C,EAfiB,SAe7Bd,KAf6B,gBAiBnCN,QAAQ,CAAC,CACLS,IAAI,CAAEhB,QADD,CAELiB,OAAO,CAAEJ,KAAG,CAACK,IAFR,CAAD,CAAR,CAIAX,QAAQ,CAACT,QAAQ,CAAC,eAAD,CAAkB,SAAlB,CAAT,CAAR,CArBmC,gCAwBnCS,QAAQ,CAAC,CACLS,IAAI,CAAEf,UADD,CAELgB,OAAO,CAAE,CAACH,MAAM,CAACD,GAAG,CAACC,MAAZ,CAAoBK,GAAG,CAACN,GAAG,CAACM,GAA5B,CAFJ,CAAD,CAAR,CAxBmC,6FAgCjCC,MAhCiC,CAgCxB,aAAIC,QAAJ,CAAaH,IAAb,CAAkBE,MAhCM,CAiCvCZ,OAAO,CAACC,GAAR,eACA,GAAGW,MAAH,CAAU,CACNA,MAAM,CAACE,OAAP,CAAe,SAAAC,KAAK,CAAI,CACpBhB,QAAQ,CAACT,QAAQ,CAACyB,KAAD,CAAO,QAAP,CAAT,CAAR,CACH,CAFD,EAGH,CAEDhB,QAAQ,CAAC,CACLS,IAAI,CAAEf,UADD,CAELgB,OAAO,CAAE,CAACH,MAAM,CAAC,aAAIO,QAAJ,CAAaP,MAArB,CAA6BK,GAAG,CAAC,aAAIE,QAAJ,CAAaG,UAA9C,CAFJ,CAAD,CAAR,CAxCuC,uEAAlB,kEAAtB,CAgDP,MAAO,IAAMW,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACR,EAAD,CAAKS,UAAL,kGAAoB,kBAAM7B,QAAN,4KAGvBR,CAAAA,KAAK,CAAC8B,MAAN,mDAAwDF,EAAxD,aAA8DS,UAA9D,EAHuB,QAGnCvB,GAHmC,qBAKrCA,GAAG,CAACC,MAAJ,GAAe,GALsB,mDAMnBf,CAAAA,KAAK,CAACgB,GAAN,2CAA6CY,EAA7C,EANmB,QAM/Bd,KAN+B,gBAQrCN,QAAQ,CAAC,CACLS,IAAI,CAAEhB,QADD,CAELiB,OAAO,CAAEJ,KAAG,CAACK,IAFR,CAAD,CAAR,CAIAX,QAAQ,CAACT,QAAQ,CAAC,iBAAD,CAAoB,SAApB,CAAT,CAAR,CAZqC,gCAerCS,QAAQ,CAAC,CACLS,IAAI,CAAEf,UADD,CAELgB,OAAO,CAAE,CAACH,MAAM,CAACD,GAAG,CAACC,MAAZ,CAAoBK,GAAG,CAACN,GAAG,CAACM,GAA5B,CAFJ,CAAD,CAAR,CAfqC,6FAuBzC,SACAZ,QAAQ,CAAC,CACLS,IAAI,CAAEf,UADD,CAELgB,OAAO,CAAE,CAACH,MAAM,CAAC,aAAIO,QAAJ,CAAaP,MAArB,CAA6BK,GAAG,CAAC,aAAIE,QAAJ,CAAaG,UAA9C,CAFJ,CAAD,CAAR,CAxByC,uEAApB,kEAAtB","sourcesContent":["import {setAlert} from './alert';\r\nimport axios from 'axios';\r\nimport{ GET_POST, POST_ERROR,GET_ALL_POST } from './types';\r\n\r\nexport const createPost = (fromData, history, edit=false) => async dispatch =>{\r\n    try{    \r\n        console.log(\"Profile Form Data\", fromData)\r\n        debugger;\r\n\r\n        const config = {\r\n            headers : {\r\n                \"content-type\": \"application/json\",\r\n            }\r\n        }\r\n\r\n        const res = await axios.post('http://127.0.0.1:5000/api/posts/', fromData, config)\r\n        \r\n        if (res.status === 200){\r\n            const res = await axios.get(`http://127.0.0.1:5000/api/posts/`)\r\n\r\n            dispatch({\r\n                type: GET_ALL_POST,\r\n                payload: res.data\r\n            })\r\n\r\n            dispatch(setAlert(\"Post Added\", \"success\"));\r\n        }\r\n        else{\r\n            dispatch({\r\n                type: POST_ERROR,\r\n                payload: {status:res.status, msg:res.msg}\r\n            });\r\n        }\r\n    }   \r\n    catch(err){\r\n\r\n        const errors = err.response.data.errors\r\n        console.log(err)\r\n        if(errors){\r\n            errors.forEach(error => {\r\n                dispatch(setAlert(error,\"danger\"))\r\n            });\r\n        }\r\n\r\n        dispatch({\r\n            type: POST_ERROR,\r\n            payload: {status:err.response.status, msg:err.response.statusText}\r\n        });\r\n\r\n    }\r\n}\r\n\r\n\r\nexport const getPost = ()=> async dispatch =>{\r\n\r\n    try{\r\n\r\n        const res = await axios.get(`http://127.0.0.1:5000/api/posts/`)\r\n\r\n        dispatch({\r\n            type: GET_ALL_POST,\r\n            payload: res.data\r\n        })\r\n\r\n    }\r\n    catch(err){ \r\n        debugger;\r\n        dispatch({\r\n            type: POST_ERROR,\r\n            payload: {status:err.response.status, msg:err.response.statusText}\r\n        });\r\n    }\r\n\r\n}\r\n\r\n\r\nexport const getPostById = (id)=> async dispatch =>{\r\n\r\n    try{\r\n\r\n        const res = await axios.get(`http://127.0.0.1:5000/api/posts/${id}`)\r\n\r\n        dispatch({\r\n            type: GET_POST,\r\n            payload: res.data\r\n        })\r\n\r\n    }\r\n    catch(err){ \r\n        debugger;\r\n        dispatch({\r\n            type: POST_ERROR,\r\n            payload: {status:err.response.status, msg:err.response.statusText}\r\n        });\r\n    }\r\n}\r\n\r\n\r\nexport const deletePost = (id)=> async dispatch =>{\r\n\r\n    try{\r\n\r\n        const res = await axios.delete(`http://127.0.0.1:5000/api/posts/${id}`)\r\n\r\n        if (res.status === 200){\r\n            const res = await axios.get(`http://127.0.0.1:5000/api/posts/`)\r\n\r\n            dispatch({\r\n                type: GET_ALL_POST,\r\n                payload: res.data\r\n            })\r\n\r\n            dispatch(setAlert(\"Post deleted\", \"success\"));\r\n        }\r\n        else{\r\n            dispatch({\r\n                type: POST_ERROR,\r\n                payload: {status:res.status, msg:res.msg}\r\n            });\r\n        }\r\n\r\n    }\r\n    catch(err){ \r\n        debugger;\r\n        dispatch({\r\n            type: POST_ERROR,\r\n            payload: {status:err.response.status, msg:err.response.statusText}\r\n        });\r\n    }\r\n}\r\n\r\n\r\n\r\nexport const likePost = (id)=> async dispatch =>{\r\n\r\n    try{\r\n\r\n        const config = {\r\n            headers : {\r\n                \"content-type\": \"application/json\",\r\n            }\r\n        }\r\n\r\n        const body = {\"msg\": \"text\"}\r\n\r\n        const res = await axios.put(`http://127.0.0.1:5000/api/posts/like/${id}`, body, config)\r\n\r\n        if (res.status === 200){\r\n            const res = await axios.get(`http://127.0.0.1:5000/api/posts/`)\r\n\r\n            dispatch({\r\n                type: GET_ALL_POST,\r\n                payload: res.data\r\n            })\r\n\r\n            dispatch(setAlert(\"Post liked\", \"success\"));\r\n        }\r\n        else{\r\n            dispatch({\r\n                type: POST_ERROR,\r\n                payload: {status:res.status, msg:res.msg}\r\n            });\r\n        }\r\n\r\n    }\r\n    catch(err){ \r\n        debugger;\r\n        dispatch({\r\n            type: POST_ERROR,\r\n            payload: {status:err.response.status, msg:err.response.data.msg            }\r\n        });\r\n        dispatch(setAlert(err.response.data.msg, \"danger\"));\r\n    }\r\n}\r\n\r\n\r\nexport const unlikePost = (id)=> async dispatch =>{\r\n\r\n    try{\r\n\r\n        const config = {\r\n            headers : {\r\n                \"content-type\": \"application/json\",\r\n            }\r\n        }\r\n\r\n        const body = {\"text\": \"msg\"}\r\n\r\n        const res = await axios.put(`http://127.0.0.1:5000/api/posts/unlike/${id}`, body, config)\r\n\r\n        if (res.status === 200){\r\n            const res = await axios.get(`http://127.0.0.1:5000/api/posts/`)\r\n\r\n            dispatch({\r\n                type: GET_ALL_POST,\r\n                payload: res.data\r\n            })\r\n\r\n            dispatch(setAlert(\"Post unliked\", \"success\"));\r\n        }\r\n        else{\r\n            dispatch({\r\n                type: POST_ERROR,\r\n                payload: {status:res.status, msg:res.msg}\r\n            });\r\n        }\r\n\r\n    }\r\n    catch(err){ \r\n        debugger;\r\n        dispatch({\r\n            type: POST_ERROR,\r\n            payload: {status:err.response.status, msg:err.response.data.msg}\r\n        });\r\n        dispatch(setAlert(err.response.data.msg, \"danger\"));\r\n    }\r\n}\r\n \r\n\r\n\r\nexport const createComment = (fromData, id) => async dispatch =>{\r\n    debugger;\r\n    try{    \r\n        console.log(\"comment Form Data\", fromData)\r\n        debugger;\r\n\r\n        const config = {\r\n            headers : {\r\n                \"content-type\": \"application/json\",\r\n            }\r\n        }\r\n\r\n        const res = await axios.post(`http://127.0.0.1:5000/api/posts/comment/${id}`, fromData, config)\r\n        \r\n        if (res.status === 200){\r\n            const res = await axios.get(`http://127.0.0.1:5000/api/posts/${id}`)\r\n\r\n            dispatch({\r\n                type: GET_POST,\r\n                payload: res.data\r\n            })\r\n            dispatch(setAlert(\"Comment Added\", \"success\"));\r\n        }\r\n        else{\r\n            dispatch({\r\n                type: POST_ERROR,\r\n                payload: {status:res.status, msg:res.msg}\r\n            });\r\n        }\r\n    }   \r\n    catch(err){\r\n\r\n        const errors = err.response.data.errors\r\n        console.log(err)\r\n        if(errors){\r\n            errors.forEach(error => {\r\n                dispatch(setAlert(error,\"danger\"))\r\n            });\r\n        }\r\n\r\n        dispatch({\r\n            type: POST_ERROR,\r\n            payload: {status:err.response.status, msg:err.response.statusText}\r\n        });\r\n\r\n    }\r\n}\r\n\r\nexport const removeComment = (id, comment_id) => async dispatch =>{\r\n    try{\r\n\r\n        const res = await axios.delete(`http://127.0.0.1:5000/api/posts/comment/${id}/${comment_id}`)\r\n\r\n        if (res.status === 200){\r\n            const res = await axios.get(`http://127.0.0.1:5000/api/posts/${id}`)\r\n\r\n            dispatch({\r\n                type: GET_POST,\r\n                payload: res.data\r\n            })\r\n            dispatch(setAlert(\"Comment removed\", \"success\"));\r\n        }\r\n        else{\r\n            dispatch({\r\n                type: POST_ERROR,\r\n                payload: {status:res.status, msg:res.msg}\r\n            });\r\n        }\r\n\r\n    }\r\n    catch(err){ \r\n        debugger;\r\n        dispatch({\r\n            type: POST_ERROR,\r\n            payload: {status:err.response.status, msg:err.response.statusText}\r\n        });\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}