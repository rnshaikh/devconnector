{"ast":null,"code":"import _defineProperty from\"C:\\\\Users\\\\rshaikh\\\\Desktop\\\\development\\\\dev-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:\\\\Users\\\\rshaikh\\\\Desktop\\\\development\\\\dev-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:\\\\Users\\\\rshaikh\\\\Desktop\\\\development\\\\dev-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,Fragment}from'react';import{connect}from\"react-redux\";import{useState}from'react';import Spinner from\"../layout/Spinner\";import{Link}from'react-router-dom';import{getPostById,createComment,removeComment}from'../../actions/post';import CommentList from'./CommentList';import Moment from'react-moment';function Comments(_ref){var match=_ref.match,post=_ref.post,auth=_ref.auth,getPostById=_ref.getPostById,createComment=_ref.createComment,removeComment=_ref.removeComment;var _useState=useState({text:\"\"}),_useState2=_slicedToArray(_useState,2),formdata=_useState2[0],setformdata=_useState2[1];var text=formdata.text;useEffect(function(){getPostById(match.params.id);},[getPostById]);console.log(\"comment.js\",post.post);var _onChange=function onChange(e){setformdata(_objectSpread({},formdata,_defineProperty({},e.target.name,e.target.value)));};var _onSubmit=function onSubmit(e){debugger;e.preventDefault();createComment(formdata,post.post._id);setformdata(_objectSpread({},formdata,{text:\"\"}));};return post.loading?/*#__PURE__*/React.createElement(Spinner,null):/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(Link,{to:\"/posts\",className:\"btn\"},\"Back To Posts\"),/*#__PURE__*/React.createElement(\"div\",{className:\"post bg-white p-1 my-1\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"a\",{href:\"profile.html\"},/*#__PURE__*/React.createElement(\"img\",{className:\"round-img\",src:post.post.gravtar,alt:\"\"}),/*#__PURE__*/React.createElement(\"h4\",null,post.post.name))),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",{className:\"my-1\"},post.post.text),/*#__PURE__*/React.createElement(\"p\",{className:\"post-date\"},\"Posted on  \",/*#__PURE__*/React.createElement(Moment,{format:\"YYYY/MM/DD\"},post.date)))),/*#__PURE__*/React.createElement(\"div\",{className:\"post-form\",onSubmit:function onSubmit(e){return _onSubmit(e);}},/*#__PURE__*/React.createElement(\"div\",{className:\"bg-primary p\"},/*#__PURE__*/React.createElement(\"h3\",null,\"Leave A Comment\")),/*#__PURE__*/React.createElement(\"form\",{className:\"form my-1\"},/*#__PURE__*/React.createElement(\"textarea\",{name:\"text\",cols:\"30\",rows:\"5\",value:text,placeholder:\"Comment on this post\",onChange:function onChange(e){return _onChange(e);},required:true}),/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",className:\"btn btn-dark my-1\",value:\"Submit\"}))),/*#__PURE__*/React.createElement(CommentList,{comments:post.post.comments,auth:auth,removeComment:removeComment,post_id:post.post._id}));}var mapStateToProps=function mapStateToProps(state){return{post:state.post,auth:state.auth};};export default connect(mapStateToProps,{getPostById:getPostById,createComment:createComment,removeComment:removeComment})(Comments);","map":{"version":3,"sources":["C:/Users/rshaikh/Desktop/development/dev-front/src/components/comment/Comments.js"],"names":["React","useEffect","Fragment","connect","useState","Spinner","Link","getPostById","createComment","removeComment","CommentList","Moment","Comments","match","post","auth","text","formdata","setformdata","params","id","console","log","onChange","e","target","name","value","onSubmit","preventDefault","_id","loading","gravtar","date","comments","mapStateToProps","state"],"mappings":"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","sourcesContent":["import React,{useEffect, Fragment} from 'react';\r\nimport{ connect }  from \"react-redux\";\r\nimport { useState } from 'react'\r\nimport Spinner from \"../layout/Spinner\";\r\nimport PropTypes from 'prop-types';\r\nimport { Link } from 'react-router-dom';\r\nimport {getPostById, createComment, removeComment} from '../../actions/post';\r\nimport CommentList from './CommentList';\r\nimport Moment from 'react-moment';\r\n\r\nfunction Comments({match,post,auth, getPostById, createComment, removeComment}) {\r\n    \r\n    const [formdata, setformdata] = useState({\r\n        text:\"\",\r\n\r\n    });\r\n    const {\r\n        text,\r\n    } = formdata;\r\n\r\n    useEffect(() => {\r\n        getPostById(match.params.id);\r\n    }, [getPostById]);\r\n\r\n\r\n    console.log(\"comment.js\", post.post)\r\n    \r\n    \r\n    const onChange =(e)=>{ setformdata({...formdata, [e.target.name]:e.target.value})};\r\n    const onSubmit = (e)=>{\r\n        debugger;\r\n        e.preventDefault();\r\n        createComment(formdata,post.post._id)\r\n        setformdata({...formdata, text:\"\"})\r\n    }\r\n\r\n\r\n    return post.loading ? <Spinner></Spinner>:\r\n        (\r\n        <Fragment>\r\n            <Link to=\"/posts\" className=\"btn\">Back To Posts</Link>\r\n            <div className=\"post bg-white p-1 my-1\">\r\n                <div>\r\n                <a href=\"profile.html\">\r\n                    <img\r\n                    className=\"round-img\"\r\n                    src={post.post.gravtar}\r\n                    alt=\"\"\r\n                    />\r\n                    <h4>{post.post.name}</h4>\r\n\r\n                </a>\r\n                </div>\r\n                <div>\r\n                <p className=\"my-1\">\r\n                    {post.post.text}\r\n                </p>\r\n                <p className=\"post-date\">\r\n                    Posted on  <Moment format=\"YYYY/MM/DD\">\r\n                        {post.date}\r\n                    </Moment>\r\n                </p>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"post-form\" onSubmit={e=> onSubmit(e)}> \r\n                <div className=\"bg-primary p\">\r\n                <h3>Leave A Comment</h3>\r\n                </div>\r\n                <form className=\"form my-1\">\r\n                <textarea\r\n                    name=\"text\"\r\n                    cols=\"30\"\r\n                    rows=\"5\"\r\n                    value={text}\r\n                    placeholder=\"Comment on this post\"\r\n                    onChange = {(e)=>onChange(e)}\r\n                    required\r\n                ></textarea>\r\n                <input type=\"submit\" className=\"btn btn-dark my-1\" value=\"Submit\" />\r\n                </form>\r\n            </div>\r\n\r\n            <CommentList comments={post.post.comments} auth={auth} removeComment={removeComment} post_id={post.post._id}></CommentList>\r\n        </Fragment>\r\n    )\r\n}\r\n\r\nComments.propTypes = {\r\n    post: PropTypes.object.isRequired,\r\n    getPostById: PropTypes.func.isRequired,\r\n    createComment: PropTypes.func.isRequired,\r\n    removeComment: PropTypes.func.isRequired,\r\n    auth : PropTypes.object.isRequired,\r\n}\r\n\r\nconst mapStateToProps=state=>({\r\n    post: state.post,\r\n    auth: state.auth\r\n})\r\n\r\nexport default connect(mapStateToProps, { getPostById, createComment, removeComment })(Comments);\r\n"]},"metadata":{},"sourceType":"module"}